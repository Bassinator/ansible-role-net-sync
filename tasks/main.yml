---

- name: install unison
  apt:
    name:
      - unison
    state: present
  become: true

- name: create unison config directory
  file:
    path: "/home/{{ installation_os_user }}/.unison"
    owner: "{{ installation_os_user }}"
    group: "{{ installation_os_group }}"
    state: directory

- name: copy unison sync profile
  copy:
    src: "{{ item }}"
    dest: "/home/{{ installation_os_user }}/.unison/"
    owner: "{{ installation_os_user }}"
    group: "{{ installation_os_group }}"
  with_items:
    - home_sync.prf

- name: copy backup and restore script
  copy:
    src: "{{ item }}"
    dest: "/usr/bin/"
    mode: '777'
  with_items:
    - backup_home.sh
    - restore_home.sh
    - switch_user.sh
